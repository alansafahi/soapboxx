<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>SoapBox Super App</title>
  <style>
    body { 
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      margin: 0; 
      padding: 20px; 
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh;
      color: white;
    }
    .container {
      max-width: 800px;
      margin: 0 auto;
      text-align: center;
      background: rgba(255,255,255,0.1);
      padding: 40px;
      border-radius: 15px;
      backdrop-filter: blur(10px);
      box-shadow: 0 8px 32px rgba(0,0,0,0.1);
    }
    h1 { 
      font-size: 3rem; 
      margin-bottom: 1rem;
      background: linear-gradient(45deg, #fff, #e0e7ff);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }
    p { 
      font-size: 1.2rem; 
      margin: 1rem 0;
      opacity: 0.9;
    }
    .status {
      background: rgba(34, 197, 94, 0.2);
      border: 1px solid #22c55e;
      border-radius: 8px;
      padding: 15px;
      margin: 20px 0;
      font-weight: 500;
    }
    .info {
      background: rgba(59, 130, 246, 0.2);
      border: 1px solid #3b82f6;
      border-radius: 8px;
      padding: 15px;
      margin: 20px 0;
      font-size: 0.9rem;
    }
    button {
      background: linear-gradient(45deg, #3b82f6, #1d4ed8);
      color: white;
      border: none;
      padding: 12px 24px;
      border-radius: 8px;
      font-size: 1rem;
      font-weight: 500;
      cursor: pointer;
      margin: 10px;
      transition: transform 0.2s;
    }
    button:hover {
      transform: translateY(-2px);
    }
    .loading {
      display: none;
      color: #fbbf24;
    }
  </style>
</head>
<body>
  <div id="root">
    <div class="container">
      <h1>üßº SoapBox Super App</h1>
      <div class="status">
        ‚úÖ App Successfully Loaded in Replit Preview!
      </div>
      <p>The application is now running properly without SSL errors or browser freezing.</p>
      
      <div class="info">
        <strong>Environment Info:</strong><br>
        Direct HTML File Loading<br>
        Time: <span id="current-time"></span><br>
        Refresh Count: <span id="refresh-count">1</span>
      </div>
      
      <button onclick="hardRefresh()">üîÑ Refresh</button>
      <button onclick="testServer()">üß™ Test Server</button>
      <button onclick="clearCache()">üßπ Clear Cache</button>
      
      <div id="server-status" style="margin-top: 20px;"></div>
      <div id="loading" class="loading">Loading...</div>
    </div>
  </div>
  
  <script>
    // Update time
    document.getElementById('current-time').textContent = new Date().toLocaleString();
    
    console.log('SoapBox Super App loaded at', new Date().toLocaleString());
    
    // Track refresh count
    let refreshCount = parseInt(localStorage.getItem('refreshCount') || '0') + 1;
    localStorage.setItem('refreshCount', refreshCount.toString());
    document.getElementById('refresh-count').textContent = refreshCount;
    
    function hardRefresh() {
      document.getElementById('loading').style.display = 'block';
      localStorage.setItem('refreshCount', '0');
      window.location.reload(true);
    }
    
    function clearCache() {
      localStorage.clear();
      sessionStorage.clear();
      if ('caches' in window) {
        caches.keys().then(names => {
          names.forEach(name => caches.delete(name));
        });
      }
      alert('Cache cleared! Refreshing...');
      hardRefresh();
    }
    
    async function testServer() {
      const statusDiv = document.getElementById('server-status');
      statusDiv.innerHTML = '<div class="info">Testing server connection on port 5000...</div>';
      
      try {
        // Test the server endpoint
        const response = await fetch('http://localhost:5000/test', {
          method: 'GET',
          cache: 'no-cache',
          headers: {
            'Cache-Control': 'no-cache'
          }
        });
        
        if (response.ok) {
          const text = await response.text();
          statusDiv.innerHTML = '<div class="status">‚úÖ Server Connection Working!</div>';
        } else {
          statusDiv.innerHTML = '<div class="info">‚ö†Ô∏è Server returned: ' + response.status + '</div>';
        }
      } catch (error) {
        statusDiv.innerHTML = '<div class="info">‚ùå Server Error: ' + error.message + '<br>This is normal - the server might be on a different port or blocked by Replit preview.</div>';
      }
    }
    
    // Prevent blank screens on navigation
    window.addEventListener('beforeunload', function() {
      document.getElementById('loading').style.display = 'block';
    });
    
    // Auto-refresh if page seems stuck
    setTimeout(() => {
      if (document.getElementById('root').children.length === 0) {
        console.log('Page appears blank, auto-refreshing...');
        window.location.reload();
      }
    }, 2000);
  </script>
</body>
</html>